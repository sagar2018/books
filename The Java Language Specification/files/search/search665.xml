THREADS AND LOCKS:@0.142857:0.063921:0.323026:0.063921:0.323026:0.051756:0.142857:0.051756:0.009929:0.012893:0.010911:0.010911:0.010911:0.012893:0.008929:0.005754:0.010911:0.011911:0.012893:0.005754:0.009929:0.012893:0.011911:0.011911:0.008929
Memory Model:@0.746260:0.063921:0.857139:0.063921:0.857139:0.051756:0.746260:0.051756:0.014875:0.007929:0.012893:0.008929:0.006946:0.007929:0.005754:0.014875:0.008929:0.008929:0.007929:0.004964
17.4:@0.897321:0.063921:0.928571:0.063921:0.928571:0.051756:0.897321:0.051756:0.008929:0.008929:0.004464:0.008929
645:@0.895833:0.955624:0.928571:0.955624:0.928571:0.940874:0.895833:0.940874:0.010913:0.010913:0.010913
17.4 Memory Model:@0.142857:0.122110:0.379030:0.122110:0.379030:0.104677:0.142857:0.104677:0.012897:0.012897:0.006448:0.012897:0.019841:0.024349:0.011452:0.021486:0.012897:0.011452:0.012897:0.006448:0.024349:0.012897:0.014341:0.011452:0.007171
A :@0.142857:0.168113:0.164071:0.168113:0.164071:0.153044:0.142857:0.153044:0.015758:0.005456
memory  model:@0.169097:0.167912:0.303220:0.167912:0.303220:0.153044:0.169097:0.153044:0.015758:0.009690:0.015758:0.010913:0.008490:0.009690:0.005456:0.005026:0.015758:0.010913:0.010913:0.009690:0.006067
  describes,  given  a  program  and  an  execution  trace  of  that:@0.303220:0.168113:0.857143:0.168113:0.857143:0.153044:0.303220:0.153044:0.005456:0.005026:0.010913:0.009690:0.008490:0.009690:0.007268:0.006067:0.010913:0.009690:0.008490:0.005456:0.005456:0.005026:0.010913:0.006067:0.010913:0.009690:0.010913:0.005456:0.005026:0.009690:0.005456:0.005026:0.010913:0.007268:0.010913:0.010913:0.007268:0.009690:0.016980:0.005456:0.005026:0.009690:0.010913:0.010913:0.005456:0.005026:0.009690:0.010913:0.005456:0.005026:0.009690:0.010913:0.009690:0.009690:0.010913:0.006067:0.006067:0.010913:0.010913:0.005456:0.005026:0.006067:0.007268:0.009690:0.009690:0.009690:0.005456:0.005026:0.010913:0.007268:0.005456:0.005026:0.006067:0.010913:0.009690:0.006067
program, whether the execution trace is a legal execution of the program. The:@0.142857:0.187900:0.857121:0.187900:0.857121:0.172831:0.142857:0.172831:0.010913:0.007268:0.010913:0.010913:0.007268:0.009690:0.016980:0.005456:0.008409:0.015758:0.010913:0.009690:0.006067:0.010913:0.009690:0.007268:0.008409:0.006067:0.010913:0.009690:0.008409:0.009690:0.010913:0.009690:0.009690:0.010913:0.006067:0.006067:0.010913:0.010913:0.008409:0.006067:0.007268:0.009690:0.009690:0.009690:0.008409:0.006067:0.008490:0.008409:0.009690:0.008409:0.006067:0.009690:0.010913:0.009690:0.006067:0.008409:0.009690:0.010913:0.009690:0.009690:0.010913:0.006067:0.006067:0.010913:0.010913:0.008409:0.010913:0.007268:0.008409:0.006067:0.010913:0.009690:0.008409:0.010913:0.007268:0.010913:0.010913:0.007268:0.009690:0.016980:0.005456:0.008409:0.013335:0.010913:0.009690
Java programming language memory model works by examining each read in an:@0.142857:0.207686:0.857137:0.207686:0.857137:0.192618:0.142857:0.192618:0.008490:0.009690:0.010913:0.009690:0.006194:0.010913:0.007268:0.010913:0.010913:0.007268:0.009690:0.016980:0.016980:0.006067:0.010913:0.010913:0.006194:0.006067:0.009690:0.010913:0.010913:0.010913:0.009690:0.010913:0.009690:0.006194:0.016980:0.009690:0.016980:0.010913:0.007268:0.010913:0.006194:0.016980:0.010913:0.010913:0.009690:0.006067:0.006194:0.015758:0.010913:0.007268:0.010913:0.008490:0.006194:0.010913:0.010913:0.006194:0.009690:0.010913:0.009690:0.016980:0.006067:0.010913:0.006067:0.010913:0.010913:0.006194:0.009690:0.009690:0.009690:0.010913:0.006194:0.007268:0.009690:0.009690:0.010913:0.006194:0.006067:0.010913:0.006194:0.009690:0.010913
execution trace and checking that the write observed by that read is valid according:@0.142857:0.227473:0.857155:0.227473:0.857155:0.212405:0.142857:0.212405:0.009690:0.010913:0.009690:0.009690:0.010913:0.006067:0.006067:0.010913:0.010913:0.004407:0.006067:0.007268:0.009690:0.009690:0.009690:0.004407:0.009690:0.010913:0.010913:0.004407:0.009690:0.010913:0.009690:0.009690:0.010913:0.006067:0.010913:0.010913:0.004407:0.006067:0.010913:0.009690:0.006067:0.004407:0.006067:0.010913:0.009690:0.004407:0.015758:0.007268:0.006067:0.006067:0.009690:0.004407:0.010913:0.010913:0.008490:0.009690:0.007268:0.010913:0.009690:0.010913:0.004407:0.010913:0.010913:0.004407:0.006067:0.010913:0.009690:0.006067:0.004407:0.007268:0.009690:0.009690:0.010913:0.004407:0.006067:0.008490:0.004407:0.010913:0.009690:0.006067:0.006067:0.010913:0.004407:0.009690:0.009690:0.009690:0.010913:0.007268:0.010913:0.006067:0.010913:0.010913
to certain rules.:@0.142857:0.247260:0.278022:0.247260:0.278022:0.232192:0.142857:0.232192:0.006067:0.010913:0.005456:0.009690:0.009690:0.007268:0.006067:0.009690:0.006067:0.010913:0.005456:0.007268:0.010913:0.006067:0.009690:0.008490:0.005456
The memory model describes possible behaviors of a program. An implementation:@0.142857:0.276180:0.857143:0.276180:0.857143:0.261111:0.142857:0.261111:0.013335:0.010913:0.009690:0.004446:0.016980:0.009690:0.016980:0.010913:0.007268:0.010913:0.004446:0.016980:0.010913:0.010913:0.009690:0.006067:0.004446:0.010913:0.009690:0.008490:0.009690:0.007268:0.006067:0.010913:0.009690:0.008490:0.004446:0.010913:0.010913:0.008490:0.008490:0.006067:0.010913:0.006067:0.009690:0.004446:0.010913:0.009690:0.010913:0.009690:0.010913:0.006067:0.010913:0.007268:0.008490:0.004446:0.010913:0.007268:0.004446:0.009690:0.004446:0.010913:0.007268:0.010913:0.010913:0.007268:0.009690:0.016980:0.005456:0.004446:0.015758:0.010913:0.004446:0.006067:0.016980:0.010913:0.006067:0.009690:0.016980:0.009690:0.010913:0.006067:0.009690:0.006067:0.006067:0.010913:0.010913
is free to produce any code it likes, as long as all resulting executions of a program:@0.142857:0.295967:0.857173:0.295967:0.857173:0.280898:0.142857:0.280898:0.006067:0.008490:0.004905:0.007268:0.007268:0.009690:0.009690:0.004905:0.006067:0.010913:0.004905:0.010913:0.007268:0.010913:0.010913:0.010913:0.009690:0.009690:0.004905:0.009690:0.010913:0.010913:0.004905:0.009690:0.010913:0.010913:0.009690:0.004905:0.006067:0.006067:0.004905:0.006067:0.006067:0.010913:0.009690:0.008490:0.005456:0.004905:0.009690:0.008490:0.004905:0.006067:0.010913:0.010913:0.010913:0.004905:0.009690:0.008490:0.004905:0.009690:0.006067:0.006067:0.004905:0.007268:0.009690:0.008490:0.010913:0.006067:0.006067:0.006067:0.010913:0.010913:0.004905:0.009690:0.010913:0.009690:0.009690:0.010913:0.006067:0.006067:0.010913:0.010913:0.008490:0.004905:0.010913:0.007268:0.004905:0.009690:0.004905:0.010913:0.007268:0.010913:0.010913:0.007268:0.009690:0.016980
produce a result that can be predicted by the memory model.:@0.142857:0.315753:0.672014:0.315753:0.672014:0.300685:0.142857:0.300685:0.010913:0.007268:0.010913:0.010913:0.010913:0.009690:0.009690:0.005456:0.009690:0.005456:0.007268:0.009690:0.008490:0.010913:0.006067:0.006067:0.005456:0.006067:0.010913:0.009690:0.006067:0.005456:0.009690:0.009690:0.010913:0.005456:0.010913:0.009690:0.005456:0.010913:0.007268:0.009690:0.010913:0.006067:0.009690:0.006067:0.009690:0.010913:0.005456:0.010913:0.010913:0.005456:0.006067:0.010913:0.009690:0.005456:0.016980:0.009690:0.016980:0.010913:0.007268:0.010913:0.005456:0.016980:0.010913:0.010913:0.009690:0.006067:0.005456
This  provides  a  great  deal  of  freedom  for  the  implementor  to  perform  a  myriad  of:@0.178571:0.350152:0.821425:0.350152:0.821425:0.337823:0.178571:0.337823:0.010911:0.008929:0.004964:0.006946:0.004464:0.004331:0.008929:0.005946:0.008929:0.008929:0.004964:0.008929:0.007929:0.006946:0.004464:0.004331:0.007929:0.004464:0.004331:0.008929:0.005946:0.007929:0.007929:0.004964:0.004464:0.004331:0.008929:0.007929:0.007929:0.004964:0.004464:0.004331:0.008929:0.005946:0.004464:0.004331:0.005946:0.005946:0.007929:0.007929:0.008929:0.008929:0.013893:0.004464:0.004331:0.005946:0.008929:0.005946:0.004464:0.004331:0.004964:0.008929:0.007929:0.004464:0.004331:0.004964:0.013893:0.008929:0.004964:0.007929:0.013893:0.007929:0.008929:0.004964:0.008929:0.005946:0.004464:0.004331:0.004964:0.008929:0.004464:0.004331:0.008929:0.007929:0.005946:0.005946:0.008929:0.005946:0.013893:0.004464:0.004331:0.007929:0.004464:0.004331:0.013893:0.008929:0.005946:0.004964:0.007929:0.008929:0.004464:0.004331:0.008929:0.005946
code  transformations,  including  the  reordering  of  actions  and  removal  of  unnecessary:@0.178571:0.365373:0.821415:0.365373:0.821415:0.353044:0.178571:0.353044:0.007929:0.008929:0.008929:0.007929:0.004464:0.003236:0.004964:0.005946:0.007929:0.008929:0.006946:0.005946:0.008929:0.005946:0.013893:0.007929:0.004964:0.004964:0.008929:0.008929:0.006946:0.004464:0.004464:0.003236:0.004964:0.008929:0.007929:0.004964:0.008929:0.008929:0.004964:0.008929:0.008929:0.004464:0.003236:0.004964:0.008929:0.007929:0.004464:0.003236:0.005946:0.007929:0.008929:0.005946:0.008929:0.007929:0.005946:0.004964:0.008929:0.008929:0.004464:0.003236:0.008929:0.005946:0.004464:0.003236:0.007929:0.007929:0.004964:0.004964:0.008929:0.008929:0.006946:0.004464:0.003236:0.007929:0.008929:0.008929:0.004464:0.003236:0.005946:0.007929:0.013893:0.008929:0.008929:0.007929:0.004964:0.004464:0.003236:0.008929:0.005946:0.004464:0.003236:0.008929:0.008929:0.008929:0.007929:0.007929:0.007929:0.006946:0.006946:0.007929:0.005946:0.008929
synchronization.:@0.178571:0.380594:0.297107:0.380594:0.297107:0.368265:0.178571:0.368265:0.006946:0.008929:0.008929:0.007929:0.008929:0.005946:0.008929:0.008929:0.004964:0.007929:0.007929:0.004964:0.004964:0.008929:0.008929:0.004464
Example 17.4-1. Incorrectly Synchronized Programs May Exhibit Surprising Behavior:@0.178571:0.416231:0.839286:0.416231:0.839286:0.404163:0.178571:0.404163:0.011911:0.008929:0.008929:0.014875:0.009929:0.004964:0.007929:0.004464:0.008929:0.008929:0.004464:0.008929:0.005946:0.008929:0.004464:0.004464:0.006946:0.009929:0.007929:0.008929:0.007929:0.007929:0.007929:0.007929:0.005946:0.004964:0.008929:0.004464:0.009929:0.008929:0.009929:0.007929:0.009929:0.007929:0.008929:0.009929:0.004964:0.007929:0.007929:0.009929:0.004464:0.010911:0.007929:0.008929:0.008929:0.007929:0.008929:0.014875:0.006946:0.004464:0.016857:0.008929:0.008929:0.004464:0.011911:0.008929:0.009929:0.004964:0.009929:0.004964:0.005946:0.004464:0.009929:0.009929:0.007929:0.009929:0.007929:0.004964:0.006946:0.004964:0.009929:0.008929:0.004464:0.011911:0.007929:0.009929:0.008929:0.008929:0.004964:0.008929:0.007929
The semantics of the Java programming language allow compilers and microprocessors to:@0.178571:0.452131:0.821429:0.452131:0.821429:0.439802:0.178571:0.439802:0.010911:0.008929:0.007929:0.004339:0.006946:0.007929:0.013893:0.007929:0.008929:0.004964:0.004964:0.007929:0.006946:0.004339:0.008929:0.005946:0.004339:0.004964:0.008929:0.007929:0.004339:0.006946:0.007929:0.008929:0.007929:0.004339:0.008929:0.005946:0.008929:0.008929:0.005946:0.007929:0.013893:0.013893:0.004964:0.008929:0.008929:0.004339:0.004964:0.007929:0.008929:0.008929:0.008929:0.007929:0.008929:0.007929:0.004339:0.007929:0.004964:0.004964:0.008929:0.012893:0.004339:0.007929:0.008929:0.013893:0.008929:0.004964:0.004964:0.007929:0.005946:0.006946:0.004339:0.007929:0.008929:0.008929:0.004339:0.013893:0.004964:0.007929:0.005946:0.008929:0.008929:0.005946:0.008929:0.007929:0.007929:0.006946:0.006946:0.008929:0.005946:0.006946:0.004339:0.004964:0.008929
perform optimizations that can interact with incorrectly synchronized code in ways that:@0.178571:0.467352:0.821429:0.467352:0.821429:0.455023:0.178571:0.455023:0.008929:0.007929:0.005946:0.005946:0.008929:0.005946:0.013893:0.006143:0.008929:0.008929:0.004964:0.004964:0.013893:0.004964:0.007929:0.007929:0.004964:0.004964:0.008929:0.008929:0.006946:0.006143:0.004964:0.008929:0.007929:0.004964:0.006143:0.007929:0.007929:0.008929:0.006143:0.004964:0.008929:0.004964:0.007929:0.005946:0.007929:0.007929:0.004964:0.006143:0.012893:0.004964:0.004964:0.008929:0.006143:0.004964:0.008929:0.007929:0.008929:0.005946:0.005946:0.007929:0.007929:0.004964:0.004964:0.008929:0.006143:0.006946:0.008929:0.008929:0.007929:0.008929:0.005946:0.008929:0.008929:0.004964:0.007929:0.007929:0.008929:0.006143:0.007929:0.008929:0.008929:0.007929:0.006143:0.004964:0.008929:0.006143:0.012893:0.007929:0.008929:0.006946:0.006143:0.004964:0.008929:0.007929:0.004964
can produce behaviors that seem paradoxical. Here are some examples of how incorrectly:@0.178571:0.482572:0.821417:0.482572:0.821417:0.470244:0.178571:0.470244:0.007929:0.007929:0.008929:0.004603:0.008929:0.005946:0.008929:0.008929:0.008929:0.007929:0.007929:0.004603:0.008929:0.007929:0.008929:0.007929:0.008929:0.004964:0.008929:0.005946:0.006946:0.004603:0.004964:0.008929:0.007929:0.004964:0.004603:0.006946:0.007929:0.007929:0.013893:0.004603:0.008929:0.007929:0.005946:0.007929:0.008929:0.008929:0.008929:0.004964:0.007929:0.007929:0.004964:0.004464:0.004603:0.012893:0.007929:0.005946:0.007929:0.004603:0.007929:0.005946:0.007929:0.004603:0.006946:0.008929:0.013893:0.007929:0.004603:0.007929:0.008929:0.007929:0.013893:0.008929:0.004964:0.007929:0.006946:0.004603:0.008929:0.005946:0.004603:0.008929:0.008929:0.012893:0.004603:0.004964:0.008929:0.007929:0.008929:0.005946:0.005946:0.007929:0.007929:0.004964:0.004964:0.008929
synchronized programs may exhibit surprising behaviors.:@0.178571:0.497793:0.589232:0.497793:0.589232:0.485464:0.178571:0.485464:0.006946:0.008929:0.008929:0.007929:0.008929:0.005946:0.008929:0.008929:0.004964:0.007929:0.007929:0.008929:0.004464:0.008929:0.005946:0.008929:0.008929:0.005946:0.007929:0.013893:0.006946:0.004464:0.013893:0.007929:0.008929:0.004464:0.007929:0.008929:0.008929:0.004964:0.008929:0.004964:0.004964:0.004464:0.006946:0.008929:0.005946:0.008929:0.005946:0.004964:0.006946:0.004964:0.008929:0.008929:0.004464:0.008929:0.007929:0.008929:0.007929:0.008929:0.004964:0.008929:0.005946:0.006946:0.004464
Consider, for example, the example program traces shown in Table 17.4-A. This program:@0.178571:0.531279:0.821425:0.531279:0.821425:0.518950:0.178571:0.518950:0.011911:0.008929:0.008929:0.006946:0.004964:0.008929:0.007929:0.005946:0.004464:0.004639:0.005946:0.008929:0.005946:0.004639:0.007929:0.008929:0.007929:0.013893:0.008929:0.004964:0.007929:0.004464:0.004639:0.004964:0.008929:0.007929:0.004639:0.007929:0.008929:0.007929:0.013893:0.008929:0.004964:0.007929:0.004639:0.008929:0.005946:0.008929:0.008929:0.005946:0.007929:0.013893:0.004639:0.004964:0.005946:0.007929:0.007929:0.007929:0.006946:0.004639:0.006946:0.008929:0.008929:0.012893:0.008929:0.004639:0.004964:0.008929:0.004647:0.010911:0.007929:0.008929:0.004964:0.007929:0.004639:0.008929:0.008929:0.004464:0.008929:0.005946:0.012893:0.004464:0.004639:0.010911:0.008929:0.004964:0.006946:0.004639:0.008929:0.005946:0.008929:0.008929:0.005946:0.007929:0.013893
uses local variables :@0.178571:0.546499:0.321893:0.546499:0.321893:0.534170:0.178571:0.534170:0.008929:0.006946:0.007929:0.006946:0.004464:0.004964:0.008929:0.007929:0.007929:0.004964:0.004464:0.008929:0.007929:0.005946:0.004964:0.007929:0.008929:0.004964:0.007929:0.006946:0.004464
r1:@0.321893:0.545438:0.340940:0.545438:0.340940:0.535868:0.321893:0.535868:0.009524:0.009524
 and :@0.340940:0.546499:0.375655:0.546499:0.375655:0.534170:0.340940:0.534170:0.004464:0.007929:0.008929:0.008929:0.004464
r2:@0.375655:0.545438:0.394702:0.545438:0.394702:0.535868:0.375655:0.535868:0.009524:0.009524
 and shared variables   and  . Initially, :@0.394702:0.546499:0.677589:0.546499:0.677589:0.534170:0.394702:0.534170:0.004464:0.007929:0.008929:0.008929:0.004464:0.006946:0.008929:0.007929:0.005946:0.007929:0.008929:0.004464:0.008929:0.007929:0.005946:0.004964:0.007929:0.008929:0.004964:0.007929:0.006946:0.004464:0.009524:0.004464:0.007929:0.008929:0.008929:0.004464:0.009524:0.004464:0.004464:0.005946:0.008929:0.004964:0.004964:0.004964:0.007929:0.004964:0.004964:0.008929:0.004464:0.004464
A:@0.549417:0.545438:0.558940:0.545438:0.558940:0.535868:0.549417:0.535868:0.009524
B:@0.593655:0.545438:0.603179:0.545438:0.603179:0.535868:0.593655:0.535868:0.009524
A == B == 0:@0.677589:0.545438:0.782351:0.545438:0.782351:0.535868:0.677589:0.535868:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524
.:@0.782351:0.546499:0.786815:0.546499:0.786815:0.534170:0.782351:0.534170:0.004464
Table 17.4-A. Surprising results caused by statement reordering - original code:@0.178571:0.582137:0.780732:0.582137:0.780732:0.570068:0.178571:0.570068:0.011911:0.008929:0.009929:0.004964:0.007929:0.004464:0.008929:0.008929:0.004464:0.008929:0.005946:0.012893:0.004464:0.004464:0.009929:0.009929:0.007929:0.009929:0.007929:0.004964:0.006946:0.004964:0.009929:0.008929:0.004464:0.007929:0.007929:0.006946:0.009929:0.004964:0.005946:0.006946:0.004464:0.007929:0.008929:0.009929:0.006946:0.007929:0.009929:0.004464:0.009929:0.008929:0.004464:0.006946:0.005946:0.008929:0.005946:0.007929:0.014875:0.007929:0.009929:0.005946:0.004464:0.007929:0.007929:0.008929:0.007929:0.009929:0.007929:0.007929:0.004964:0.009929:0.008929:0.004464:0.005946:0.004464:0.008929:0.007929:0.004964:0.008929:0.004964:0.009929:0.008929:0.004964:0.004464:0.007929:0.008929:0.009929:0.007929
Thread 1:@0.183036:0.614481:0.252982:0.614481:0.252982:0.602412:0.183036:0.602412:0.011911:0.009929:0.007929:0.007929:0.008929:0.009929:0.004464:0.008929
Thread 2:@0.521825:0.614481:0.591772:0.614481:0.591772:0.602412:0.521825:0.602412:0.011911:0.009929:0.007929:0.007929:0.008929:0.009929:0.004464:0.008929
1: :@0.183036:0.640487:0.201393:0.640487:0.201393:0.628158:0.183036:0.628158:0.008929:0.004964:0.004464
r2 = A;:@0.201393:0.639426:0.268060:0.639426:0.268060:0.629855:0.201393:0.629855:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524
3: :@0.521825:0.640487:0.540183:0.640487:0.540183:0.628158:0.521825:0.628158:0.008929:0.004964:0.004464
r1 = B;:@0.540183:0.639426:0.606849:0.639426:0.606849:0.629855:0.540183:0.629855:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524
2: :@0.183036:0.666362:0.201393:0.666362:0.201393:0.654033:0.183036:0.654033:0.008929:0.004964:0.004464
B = 1;:@0.201393:0.665301:0.258536:0.665301:0.258536:0.655731:0.201393:0.655731:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524
4: :@0.521825:0.666362:0.540183:0.666362:0.540183:0.654033:0.521825:0.654033:0.008929:0.004964:0.004464
A = 2;:@0.540183:0.665301:0.597325:0.665301:0.597325:0.655731:0.540183:0.655731:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524
It may appear that the result :@0.178571:0.705556:0.392466:0.705556:0.392466:0.693227:0.178571:0.693227:0.005946:0.004964:0.006379:0.013893:0.007929:0.008929:0.006379:0.007929:0.008929:0.008929:0.007929:0.007929:0.005946:0.006379:0.004964:0.008929:0.007929:0.004964:0.006379:0.004964:0.008929:0.007929:0.006379:0.005946:0.007929:0.006946:0.008929:0.004964:0.004964:0.004464
r2  ==  2:@0.394383:0.704495:0.469220:0.704495:0.469220:0.694924:0.394383:0.694924:0.009524:0.009524:0.009524:0.004085:0.009524:0.009524:0.009524:0.004085:0.009524
 and :@0.469220:0.705556:0.505849:0.705556:0.505849:0.693227:0.469220:0.693227:0.006379:0.007929:0.008929:0.008929:0.004464
r1  ==  1:@0.507764:0.704495:0.582601:0.704495:0.582601:0.694924:0.507764:0.694924:0.009524:0.009524:0.009524:0.004085:0.009524:0.009524:0.009524:0.004085:0.009524
 is impossible. Intuitively, either:@0.582601:0.705556:0.821421:0.705556:0.821421:0.693227:0.582601:0.693227:0.006379:0.004964:0.006946:0.006379:0.004964:0.013893:0.008929:0.008929:0.006946:0.006946:0.004964:0.008929:0.004964:0.007929:0.004464:0.006379:0.005946:0.008929:0.004964:0.008929:0.004964:0.004964:0.004964:0.008929:0.007929:0.004964:0.008929:0.004464:0.006379:0.007929:0.004964:0.004964:0.008929:0.007929:0.005946
instruction 1 or instruction 3 should come first in an execution. If instruction 1 comes first,:@0.178571:0.720776:0.821452:0.720776:0.821452:0.708447:0.178571:0.708447:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.004105:0.008929:0.004105:0.008929:0.005946:0.004105:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.004105:0.008929:0.004105:0.006946:0.008929:0.008929:0.008929:0.004964:0.008929:0.004105:0.007929:0.008929:0.013893:0.007929:0.004105:0.005946:0.004964:0.005946:0.006946:0.004964:0.004105:0.004964:0.008929:0.004105:0.007929:0.008929:0.004105:0.007929:0.008929:0.007929:0.007929:0.008929:0.004964:0.004964:0.008929:0.008929:0.004464:0.004105:0.005946:0.005946:0.004105:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.004105:0.008929:0.004105:0.007929:0.008929:0.013893:0.007929:0.006946:0.004105:0.005946:0.004964:0.005946:0.006946:0.004964:0.004464
it should not be able to see the write at instruction 4. If instruction 3 comes first, it should:@0.178571:0.735997:0.821393:0.735997:0.821393:0.723668:0.178571:0.723668:0.004964:0.004964:0.004685:0.006946:0.008929:0.008929:0.008929:0.004964:0.008929:0.004685:0.008929:0.008929:0.004964:0.004685:0.008929:0.007929:0.004685:0.007929:0.008929:0.004964:0.007929:0.004685:0.004964:0.008929:0.004685:0.006946:0.007929:0.007929:0.004685:0.004964:0.008929:0.007929:0.004685:0.012893:0.005946:0.004964:0.004964:0.007929:0.004685:0.007929:0.004964:0.004685:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.004685:0.008929:0.004464:0.004685:0.005946:0.005946:0.004685:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.004685:0.008929:0.004685:0.007929:0.008929:0.013893:0.007929:0.006946:0.004685:0.005946:0.004964:0.005946:0.006946:0.004964:0.004464:0.004685:0.004964:0.004964:0.004685:0.006946:0.008929:0.008929:0.008929:0.004964:0.008929
not be able to see the write at instruction 2.:@0.178571:0.751218:0.486071:0.751218:0.486071:0.738889:0.178571:0.738889:0.008929:0.008929:0.004964:0.004464:0.008929:0.007929:0.004464:0.007929:0.008929:0.004964:0.007929:0.004464:0.004964:0.008929:0.004464:0.006946:0.007929:0.007929:0.004464:0.004964:0.008929:0.007929:0.004464:0.012893:0.005946:0.004964:0.004964:0.007929:0.004464:0.007929:0.004964:0.004464:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.004464:0.008929:0.004464
If some execution exhibited this behavior, then we would know that instruction 4 came:@0.178571:0.784703:0.821411:0.784703:0.821411:0.772374:0.178571:0.772374:0.005946:0.005946:0.006071:0.006946:0.008929:0.013893:0.007929:0.006071:0.007929:0.008929:0.007929:0.007929:0.008929:0.004964:0.004964:0.008929:0.008929:0.006071:0.007929:0.008929:0.008929:0.004964:0.008929:0.004964:0.004964:0.007929:0.008929:0.006071:0.004964:0.008929:0.004964:0.006946:0.006071:0.008929:0.007929:0.008929:0.007929:0.008929:0.004964:0.008929:0.005946:0.004464:0.006071:0.004964:0.008929:0.007929:0.008929:0.006071:0.012893:0.007929:0.006071:0.012893:0.008929:0.008929:0.004964:0.008929:0.006071:0.008929:0.008929:0.008929:0.012893:0.006071:0.004964:0.008929:0.007929:0.004964:0.006071:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.006071:0.008929:0.006071:0.007929:0.007929:0.013893:0.007929
before instruction 1, which came before instruction 2, which came before instruction 3,:@0.178571:0.799924:0.821417:0.799924:0.821417:0.787595:0.178571:0.787595:0.008929:0.007929:0.005946:0.008929:0.005946:0.007929:0.006169:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.006169:0.008929:0.004464:0.006169:0.012893:0.008929:0.004964:0.007929:0.008929:0.006169:0.007929:0.007929:0.013893:0.007929:0.006169:0.008929:0.007929:0.005946:0.008929:0.005946:0.007929:0.006169:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.006169:0.008929:0.004464:0.006169:0.012893:0.008929:0.004964:0.007929:0.008929:0.006169:0.007929:0.007929:0.013893:0.007929:0.006169:0.008929:0.007929:0.005946:0.008929:0.005946:0.007929:0.006169:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.006169:0.008929:0.004464
which came before instruction 4. This is, on the face of it, absurd.:@0.178571:0.815145:0.647732:0.815145:0.647732:0.802816:0.178571:0.802816:0.012893:0.008929:0.004964:0.007929:0.008929:0.004464:0.007929:0.007929:0.013893:0.007929:0.004464:0.008929:0.007929:0.005946:0.008929:0.005946:0.007929:0.004464:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.004464:0.008929:0.004464:0.004464:0.010911:0.008929:0.004964:0.006946:0.004464:0.004964:0.006946:0.004464:0.004464:0.008929:0.008929:0.004464:0.004964:0.008929:0.007929:0.004464:0.005946:0.007929:0.007929:0.007929:0.004464:0.008929:0.005946:0.004464:0.004964:0.004964:0.004464:0.004464:0.007929:0.008929:0.006946:0.008929:0.005946:0.008929:0.004464
However, compilers are allowed to reorder the instructions in either thread, when this:@0.178571:0.848630:0.821411:0.848630:0.821411:0.836301:0.178571:0.836301:0.012893:0.008929:0.012893:0.007929:0.008929:0.007929:0.005946:0.004464:0.007119:0.007929:0.008929:0.013893:0.008929:0.004964:0.004964:0.007929:0.005946:0.006946:0.007119:0.007929:0.005946:0.007929:0.007119:0.007929:0.004964:0.004964:0.008929:0.012893:0.007929:0.008929:0.007119:0.004964:0.008929:0.007119:0.005946:0.007929:0.008929:0.005946:0.008929:0.007929:0.005946:0.007119:0.004964:0.008929:0.007929:0.007119:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.006946:0.007119:0.004964:0.008929:0.007119:0.007929:0.004964:0.004964:0.008929:0.007929:0.005946:0.007119:0.004964:0.008929:0.005946:0.007929:0.007929:0.008929:0.004464:0.007119:0.012893:0.008929:0.007929:0.008929:0.007119:0.004964:0.008929:0.004964:0.006946
does not affect the execution of that thread in isolation. If instruction 1 is reordered with:@0.178571:0.863851:0.821405:0.863851:0.821405:0.851522:0.178571:0.851522:0.008929:0.008929:0.007929:0.006946:0.005329:0.008929:0.008929:0.004964:0.005329:0.007929:0.005946:0.005946:0.007929:0.007929:0.004964:0.005329:0.004964:0.008929:0.007929:0.005329:0.007929:0.008929:0.007929:0.007929:0.008929:0.004964:0.004964:0.008929:0.008929:0.005329:0.008929:0.005946:0.005329:0.004964:0.008929:0.007929:0.004964:0.005329:0.004964:0.008929:0.005946:0.007929:0.007929:0.008929:0.005329:0.004964:0.008929:0.005329:0.004964:0.006946:0.008929:0.004964:0.007929:0.004964:0.004964:0.008929:0.008929:0.004464:0.005329:0.005946:0.005946:0.005329:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.005329:0.008929:0.005329:0.004964:0.006946:0.005329:0.005946:0.007929:0.008929:0.005946:0.008929:0.007929:0.005946:0.007929:0.008929:0.005329:0.012893:0.004964:0.004964:0.008929
instruction 2, as shown in the trace in Table 17.4-B, then it is easy to see how the result:@0.178571:0.879072:0.821419:0.879072:0.821419:0.866743:0.178571:0.866743:0.004964:0.008929:0.006946:0.004964:0.005946:0.008929:0.007929:0.004964:0.004964:0.008929:0.008929:0.005542:0.008929:0.004464:0.005542:0.007929:0.006946:0.005542:0.006946:0.008929:0.008929:0.012893:0.008929:0.005542:0.004964:0.008929:0.005542:0.004964:0.008929:0.007929:0.005542:0.004964:0.005946:0.007929:0.007929:0.007929:0.005542:0.004964:0.008929:0.005550:0.010911:0.007929:0.008929:0.004964:0.007929:0.005542:0.008929:0.008929:0.004464:0.008929:0.005946:0.011911:0.004464:0.005542:0.004964:0.008929:0.007929:0.008929:0.005542:0.004964:0.004964:0.005542:0.004964:0.006946:0.005542:0.007929:0.007929:0.006946:0.008929:0.005542:0.004964:0.008929:0.005542:0.006946:0.007929:0.007929:0.005542:0.008929:0.008929:0.012893:0.005542:0.004964:0.008929:0.007929:0.005542:0.005946:0.007929:0.006946:0.008929:0.004964:0.004964
r2 == 2:@0.178571:0.893231:0.245238:0.893231:0.245238:0.883661:0.178571:0.883661:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524
 and :@0.245238:0.894292:0.279952:0.894292:0.279952:0.881963:0.245238:0.881963:0.004464:0.007929:0.008929:0.008929:0.004464
r1 == 1:@0.279952:0.893231:0.346619:0.893231:0.346619:0.883661:0.279952:0.883661:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524:0.009524
 might occur.:@0.346619:0.894292:0.441351:0.894292:0.441351:0.881963:0.346619:0.881963:0.004464:0.013893:0.004964:0.008929:0.008929:0.004964:0.004464:0.008929:0.007929:0.007929:0.008929:0.005946:0.004464