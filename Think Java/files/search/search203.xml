14.5. Shuﬄing and dealing:@0.145320:0.131763:0.409304:0.131763:0.409304:0.118359:0.145320:0.118359:0.010988:0.010988:0.006105:0.010988:0.006105:0.017093:0.012209:0.011604:0.012209:0.018314:0.006105:0.012209:0.010988:0.007325:0.010683:0.012209:0.012209:0.007325:0.012209:0.010027:0.010683:0.006105:0.006105:0.012209:0.010988
185:@0.747233:0.131763:0.780198:0.131763:0.780198:0.118359:0.747233:0.118359:0.010988:0.010988:0.010988
The length of the subdeck is:@0.145320:0.171827:0.377458:0.171827:0.377458:0.158423:0.145320:0.158423:0.013815:0.010627:0.008501:0.005157:0.005313:0.008501:0.010627:0.009564:0.007439:0.010627:0.005157:0.009564:0.005845:0.005138:0.007439:0.010627:0.008501:0.005157:0.007544:0.010627:0.011154:0.010627:0.008501:0.007974:0.010095:0.005157:0.005313:0.007544
high-low+1:@0.382611:0.172250:0.483136:0.172250:0.483136:0.159676:0.382611:0.159676:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052
because both the low card and high:@0.488286:0.171827:0.780200:0.171827:0.780200:0.158423:0.488286:0.158423:0.011154:0.008501:0.008501:0.009564:0.010627:0.007544:0.008501:0.005157:0.011154:0.009564:0.007439:0.010627:0.005157:0.007439:0.010627:0.008501:0.005157:0.005313:0.009017:0.013815:0.005157:0.008501:0.009564:0.007439:0.010627:0.005157:0.009564:0.010627:0.010627:0.005157:0.010627:0.005313:0.009564:0.010627
card are included. This sort of computation can be confusing, and lead to:@0.145320:0.190067:0.780204:0.190067:0.780204:0.176663:0.145320:0.176663:0.008501:0.009564:0.007439:0.010627:0.007462:0.009564:0.007439:0.008501:0.007482:0.005313:0.010607:0.008501:0.005313:0.010627:0.010627:0.008501:0.010627:0.005313:0.011779:0.013815:0.010627:0.005313:0.007544:0.007482:0.007544:0.009564:0.007439:0.007439:0.007462:0.009564:0.005845:0.007462:0.008501:0.009564:0.015940:0.010627:0.010627:0.007439:0.009564:0.007439:0.005313:0.009564:0.010627:0.007462:0.008501:0.009564:0.010627:0.007462:0.011174:0.008501:0.007462:0.008501:0.009564:0.010627:0.005845:0.010627:0.007544:0.005313:0.010627:0.009564:0.005313:0.007736:0.009564:0.010627:0.010627:0.007462:0.005313:0.008501:0.009564:0.010627:0.007482:0.007439:0.009564
“oﬀ-by-one” errors. Drawing a picture is usually the best way to avoid them.:@0.145320:0.208307:0.780204:0.208307:0.780204:0.194903:0.145320:0.194903:0.009564:0.009564:0.011158:0.006376:0.010099:0.010095:0.006376:0.009564:0.010627:0.008501:0.009564:0.005372:0.008501:0.007439:0.007439:0.009564:0.007439:0.007544:0.005313:0.008166:0.014608:0.007439:0.009017:0.013815:0.005313:0.010627:0.009564:0.005372:0.009564:0.005372:0.010627:0.005313:0.008501:0.007439:0.010627:0.007439:0.008501:0.005372:0.005313:0.007544:0.005372:0.010627:0.007544:0.010627:0.009564:0.005313:0.005313:0.010095:0.005372:0.007439:0.010627:0.008501:0.005372:0.011154:0.008501:0.007544:0.007439:0.005392:0.013268:0.009037:0.010095:0.005372:0.007439:0.009564:0.005372:0.009037:0.009568:0.009564:0.005313:0.010627:0.005372:0.007439:0.010627:0.008501:0.015940:0.005313
Because we provide an argument with:@0.145320:0.238229:0.463036:0.238229:0.463036:0.224825:0.145320:0.224825:0.013545:0.008501:0.008501:0.009564:0.010627:0.007544:0.008501:0.006192:0.013287:0.008501:0.006192:0.010627:0.007439:0.009017:0.010095:0.005313:0.010627:0.008501:0.006192:0.009564:0.010627:0.006192:0.009564:0.007439:0.009564:0.010627:0.015940:0.008501:0.010099:0.007439:0.006192:0.013815:0.005313:0.007439:0.010627
new:@0.469219:0.238652:0.499376:0.238652:0.499376:0.226078:0.469219:0.226078:0.010052:0.010052:0.010052
, the contructor that gets invoked:@0.499376:0.238229:0.780190:0.238229:0.780190:0.224825:0.499376:0.224825:0.005313:0.006232:0.007439:0.010627:0.008501:0.006192:0.008501:0.009564:0.010080:0.007439:0.007439:0.010627:0.008501:0.007439:0.009564:0.007439:0.006192:0.007439:0.010627:0.009564:0.007439:0.006192:0.009564:0.008501:0.007439:0.007544:0.006192:0.005313:0.010099:0.009568:0.009564:0.009549:0.008501:0.010627
will be the ﬁrst one, which only allocates the array and doesn’t allocate any:@0.145320:0.256469:0.780204:0.256469:0.780204:0.243065:0.145320:0.243065:0.013815:0.005313:0.005313:0.005313:0.006232:0.011154:0.008501:0.006212:0.007439:0.010627:0.008501:0.006232:0.010627:0.007439:0.007544:0.007439:0.006212:0.009564:0.010627:0.008501:0.005313:0.006251:0.013815:0.010627:0.005313:0.007974:0.010627:0.006212:0.009564:0.010627:0.005313:0.010095:0.006232:0.009564:0.005313:0.005313:0.010092:0.008501:0.009564:0.007439:0.008501:0.007544:0.006212:0.007439:0.010627:0.008501:0.006232:0.009564:0.007439:0.007439:0.009037:0.010095:0.006212:0.009564:0.010627:0.010627:0.006232:0.010627:0.010092:0.008501:0.007544:0.010627:0.005313:0.007439:0.006212:0.009564:0.005313:0.005313:0.010092:0.008501:0.009564:0.007439:0.008501:0.006232:0.009564:0.010099:0.010095
cards. Inside the:@0.145320:0.274709:0.291252:0.274709:0.291252:0.261304:0.145320:0.261304:0.008501:0.009564:0.007439:0.010627:0.007544:0.005313:0.012991:0.006900:0.010627:0.007544:0.005313:0.010627:0.008501:0.007872:0.007439:0.010627:0.008501
for:@0.299126:0.275131:0.329283:0.275131:0.329283:0.262557:0.299126:0.262557:0.010052:0.010052:0.010052
loop, the subdeck gets populated with copies of the:@0.337155:0.274709:0.780193:0.274709:0.780193:0.261304:0.337155:0.261304:0.005313:0.010092:0.009564:0.010627:0.005313:0.008244:0.007439:0.010627:0.008501:0.007872:0.007544:0.010627:0.011154:0.010627:0.008501:0.007974:0.010095:0.007872:0.009564:0.008501:0.007439:0.007544:0.007872:0.011154:0.009564:0.010627:0.010627:0.005313:0.009564:0.007439:0.008501:0.010627:0.007872:0.013815:0.005313:0.007439:0.010627:0.007872:0.008501:0.009564:0.010627:0.005313:0.008501:0.007544:0.007872:0.009564:0.005845:0.007872:0.007439:0.010627:0.008501
references from the deck.:@0.145320:0.292949:0.353712:0.292949:0.353712:0.279544:0.145320:0.279544:0.007439:0.008501:0.005845:0.008501:0.007439:0.008501:0.010627:0.008501:0.008501:0.007544:0.006368:0.005845:0.007439:0.009564:0.015940:0.006388:0.007439:0.010627:0.008501:0.006368:0.010627:0.008501:0.007974:0.010095:0.005313
The following is a state diagram of a subdeck being created with the param-:@0.145320:0.322870:0.780204:0.322870:0.780204:0.309466:0.145320:0.309466:0.013815:0.010627:0.008501:0.005860:0.005845:0.009564:0.005313:0.005313:0.009037:0.013795:0.005313:0.010627:0.009564:0.005860:0.005313:0.007544:0.005860:0.009564:0.005860:0.007544:0.007439:0.009564:0.007439:0.008501:0.005860:0.010627:0.005313:0.009564:0.009564:0.007439:0.009564:0.015940:0.005841:0.009564:0.005845:0.005860:0.009564:0.005860:0.007544:0.010627:0.011154:0.010627:0.008501:0.007974:0.010095:0.005860:0.011154:0.008501:0.005313:0.010627:0.009564:0.005860:0.008482:0.007439:0.008501:0.009564:0.007439:0.008501:0.010627:0.005860:0.013815:0.005313:0.007439:0.010627:0.005860:0.007439:0.010627:0.008501:0.005860:0.010627:0.009564:0.007439:0.009564:0.015940:0.006376
eters:@0.145320:0.341110:0.184745:0.341110:0.184745:0.327706:0.145320:0.327706:0.008501:0.007439:0.008501:0.007439:0.007544
low=3:@0.191645:0.341533:0.241908:0.341533:0.241908:0.328959:0.191645:0.328959:0.010052:0.010052:0.010052:0.010052:0.010052
and:@0.248806:0.341110:0.279623:0.341110:0.279623:0.327706:0.248806:0.327706:0.009564:0.010627:0.010627
high=7:@0.286523:0.341533:0.346838:0.341533:0.346838:0.328959:0.286523:0.328959:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052
. The result is a hand with 5 cards that are shared:@0.346837:0.341110:0.780189:0.341110:0.780189:0.327706:0.346837:0.327706:0.005313:0.010080:0.013815:0.010627:0.008501:0.006896:0.007439:0.008501:0.007544:0.010627:0.005313:0.007439:0.006896:0.005313:0.007544:0.006896:0.009564:0.006896:0.010627:0.009564:0.010627:0.010627:0.006915:0.013815:0.005313:0.007439:0.010627:0.006896:0.009564:0.006896:0.008501:0.009564:0.007439:0.010627:0.007544:0.006896:0.007439:0.010627:0.009564:0.007439:0.006896:0.009564:0.007439:0.008501:0.006896:0.007544:0.010627:0.009564:0.007439:0.008501:0.010627
with the original deck; i.e. they are aliased.:@0.145320:0.359350:0.509387:0.359350:0.509387:0.345946:0.145320:0.345946:0.013815:0.005313:0.007439:0.010627:0.006368:0.007439:0.010627:0.008501:0.006388:0.009564:0.007439:0.005313:0.009564:0.005313:0.010627:0.009564:0.005313:0.006368:0.010627:0.008501:0.007974:0.010095:0.005313:0.006368:0.005313:0.005313:0.008501:0.005313:0.008498:0.007439:0.010627:0.008501:0.010095:0.006368:0.009564:0.007439:0.008501:0.006388:0.009564:0.005313:0.005313:0.009564:0.007544:0.008501:0.010627:0.005313
deck:@0.150372:0.402661:0.187642:0.402661:0.187642:0.392406:0.150372:0.392406:0.009812:0.009812:0.008824:0.008824
cards:@0.262143:0.402661:0.305290:0.402661:0.305290:0.392406:0.262143:0.392406:0.008824:0.009812:0.005876:0.009812:0.008824
sub:@0.159194:0.527661:0.187642:0.527661:0.187642:0.517406:0.159194:0.517406:0.008824:0.009812:0.009812
cards:@0.262143:0.527661:0.305290:0.527661:0.305290:0.517406:0.262143:0.517406:0.008824:0.009812:0.005876:0.009812:0.008824
Aliasing is usually not generally a good idea, because changes in one subdeck:@0.145320:0.578127:0.780204:0.578127:0.780204:0.564722:0.145320:0.564722:0.014338:0.005313:0.005313:0.009564:0.007544:0.005313:0.010627:0.009564:0.005274:0.005313:0.007544:0.005294:0.010627:0.007544:0.010627:0.009564:0.005313:0.005313:0.010095:0.005274:0.010627:0.009564:0.007439:0.005274:0.009564:0.008501:0.010627:0.008501:0.007439:0.009564:0.005313:0.005313:0.010095:0.005294:0.009564:0.005274:0.009564:0.010092:0.010092:0.010627:0.005294:0.005313:0.010627:0.008501:0.009564:0.005313:0.005489:0.011174:0.008482:0.008501:0.009564:0.010627:0.007544:0.008501:0.005294:0.007974:0.010627:0.009564:0.010627:0.009564:0.008501:0.007544:0.005274:0.005313:0.010627:0.005274:0.009564:0.010627:0.008501:0.005294:0.007544:0.010627:0.011154:0.010627:0.008501:0.007974:0.010095
are reﬂected in others, which is not the behavior you would expect from real:@0.145320:0.596367:0.780200:0.596367:0.780200:0.582962:0.145320:0.582962:0.009564:0.007439:0.008501:0.005900:0.007439:0.008501:0.010627:0.008501:0.008501:0.007439:0.008501:0.010627:0.005900:0.005313:0.010627:0.005900:0.009564:0.007439:0.010627:0.008501:0.007439:0.007544:0.005313:0.005978:0.013815:0.010627:0.005313:0.007974:0.010627:0.005900:0.005313:0.007544:0.005900:0.010627:0.009564:0.007439:0.005900:0.007439:0.010627:0.008501:0.005900:0.011154:0.008501:0.010627:0.009037:0.010095:0.005313:0.009564:0.007439:0.005900:0.009549:0.009564:0.010627:0.005900:0.013287:0.009564:0.010627:0.005313:0.010627:0.005900:0.008501:0.010095:0.011154:0.008501:0.008501:0.007439:0.005900:0.005845:0.007439:0.009564:0.015940:0.005900:0.007439:0.008501:0.009564:0.005313
cards and decks. But if the cards are immutable, aliasing is less dangerous.:@0.145320:0.614606:0.780196:0.614606:0.780196:0.601202:0.145320:0.601202:0.008501:0.009564:0.007439:0.010627:0.007544:0.006739:0.009564:0.010627:0.010627:0.006739:0.010627:0.008501:0.007974:0.010095:0.007544:0.005313:0.009592:0.013545:0.010627:0.007439:0.006739:0.005313:0.005845:0.006739:0.007439:0.010627:0.008501:0.006739:0.008501:0.009564:0.007439:0.010627:0.007544:0.006739:0.009564:0.007439:0.008501:0.006759:0.005313:0.015921:0.015413:0.010627:0.007439:0.009564:0.010627:0.005313:0.008501:0.005313:0.006837:0.009564:0.005313:0.005313:0.009564:0.007544:0.005313:0.010627:0.009564:0.006739:0.005313:0.007544:0.006739:0.005313:0.008501:0.007544:0.007544:0.006739:0.010627:0.009564:0.010627:0.009564:0.008501:0.007439:0.009564:0.010627:0.007544:0.005313
In this case, there is probably no reason ever to change the rank or suit of a:@0.145320:0.632846:0.780204:0.632846:0.780204:0.619442:0.145320:0.619442:0.006900:0.010627:0.006212:0.007439:0.010627:0.005313:0.007544:0.006192:0.008501:0.009564:0.007544:0.008501:0.005313:0.006251:0.007439:0.010627:0.008501:0.007439:0.008501:0.006192:0.005313:0.007544:0.006212:0.010627:0.007439:0.009564:0.010627:0.009564:0.010627:0.005313:0.010095:0.006192:0.010627:0.009564:0.006212:0.007439:0.008501:0.009564:0.007544:0.009564:0.010627:0.006192:0.008501:0.009568:0.008501:0.007439:0.006212:0.007439:0.009564:0.006192:0.007974:0.010627:0.009564:0.010627:0.009564:0.008501:0.006212:0.007439:0.010627:0.008501:0.006192:0.007439:0.009564:0.010627:0.010095:0.006212:0.009564:0.007439:0.006192:0.007544:0.010627:0.005313:0.007439:0.006212:0.009564:0.005845:0.006212:0.009564
card. Instead we can create each card once and then treat it as an immutable:@0.145320:0.651086:0.780192:0.651086:0.780192:0.637682:0.145320:0.637682:0.008501:0.009564:0.007439:0.010627:0.005313:0.008087:0.006900:0.010627:0.007544:0.007439:0.008501:0.009564:0.010627:0.005118:0.013287:0.008501:0.005118:0.008501:0.009564:0.010627:0.005118:0.008501:0.007439:0.008501:0.009564:0.007439:0.008501:0.005118:0.008501:0.009564:0.007974:0.010627:0.005118:0.008501:0.009564:0.007439:0.010627:0.005118:0.009564:0.010627:0.008501:0.008501:0.005118:0.009564:0.010627:0.010627:0.005118:0.007439:0.010627:0.008501:0.010627:0.005118:0.007439:0.007439:0.008501:0.009564:0.007439:0.005118:0.005313:0.007439:0.005118:0.009564:0.007544:0.005118:0.009564:0.010627:0.005138:0.005313:0.015940:0.015393:0.010627:0.007439:0.009564:0.010627:0.005313:0.008501
object. So for:@0.145320:0.669326:0.260090:0.669326:0.260090:0.655922:0.145320:0.655922:0.009564:0.011682:0.005845:0.008501:0.008501:0.007439:0.005313:0.008498:0.010627:0.009564:0.006388:0.005845:0.009564:0.007439
Card:@0.266461:0.669749:0.306671:0.669749:0.306671:0.657175:0.266461:0.657175:0.010052:0.010052:0.010052:0.010052
s aliasing is a reasonable choice.:@0.306670:0.669326:0.574341:0.669326:0.574341:0.655922:0.306670:0.655922:0.007544:0.006368:0.009564:0.005313:0.005313:0.009564:0.007544:0.005313:0.010627:0.009564:0.006388:0.005313:0.007544:0.006368:0.009564:0.006368:0.007439:0.008501:0.009564:0.007544:0.009564:0.010627:0.009564:0.010627:0.005313:0.008501:0.006388:0.007955:0.010627:0.009564:0.005313:0.008501:0.008501:0.005313
14.5:@0.145320:0.734539:0.201580:0.734539:0.201580:0.715237:0.145320:0.715237:0.015823:0.015823:0.008791:0.015823
Shuﬄing and dealing:@0.233226:0.734539:0.523696:0.734539:0.523696:0.715237:0.233226:0.715237:0.017581:0.016709:0.017581:0.026372:0.008791:0.017581:0.015823:0.010549:0.015384:0.017581:0.017581:0.010549:0.017581:0.014439:0.015384:0.008791:0.008791:0.017581:0.015823
In Section 14.2 I wrote pseudocode for a shuﬄing algorithm. Assuming that:@0.145320:0.767976:0.780200:0.767976:0.780200:0.754572:0.145320:0.754572:0.006900:0.010627:0.006017:0.010627:0.008501:0.008501:0.007439:0.005313:0.009564:0.010627:0.006036:0.009564:0.009564:0.005313:0.009564:0.006017:0.006900:0.006017:0.013815:0.007439:0.009564:0.007439:0.008501:0.006017:0.010627:0.007544:0.008501:0.010627:0.010627:0.010111:0.008501:0.010092:0.010627:0.008501:0.006017:0.005845:0.009564:0.007439:0.006017:0.009564:0.006036:0.007544:0.010080:0.010627:0.015940:0.005313:0.010627:0.009564:0.006036:0.009564:0.005313:0.009564:0.009564:0.007439:0.005294:0.007439:0.010627:0.015940:0.005313:0.008400:0.014338:0.007544:0.007544:0.010627:0.015940:0.005313:0.010627:0.009564:0.006017:0.007439:0.010627:0.009564:0.007439
we have a method called:@0.145320:0.786216:0.347742:0.786216:0.347742:0.772812:0.145320:0.772812:0.013287:0.008501:0.005567:0.010627:0.009037:0.009568:0.008501:0.005567:0.009564:0.005567:0.015940:0.008501:0.007439:0.010627:0.010092:0.010627:0.005587:0.008501:0.009564:0.005313:0.005313:0.008501:0.010627
shuffleDeck:@0.353310:0.786639:0.463888:0.786639:0.463888:0.774065:0.353310:0.774065:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052
that takes a deck as an argument and:@0.469458:0.786216:0.780187:0.786216:0.780187:0.772812:0.469458:0.772812:0.007439:0.010627:0.009564:0.007439:0.005567:0.007439:0.009564:0.009568:0.008501:0.007544:0.005567:0.009564:0.005587:0.010627:0.008501:0.007955:0.010095:0.005587:0.009564:0.007544:0.005567:0.009564:0.010627:0.005587:0.009545:0.007439:0.009564:0.010627:0.015940:0.008501:0.010099:0.007439:0.005567:0.009564:0.010627:0.010627
shuﬄes it, we can use it to deal hands::@0.145320:0.804455:0.469845:0.804455:0.469845:0.791051:0.145320:0.791051:0.007544:0.010099:0.010627:0.015940:0.008501:0.007544:0.006368:0.005313:0.007439:0.005313:0.006368:0.013287:0.008501:0.006388:0.008501:0.009564:0.010627:0.006368:0.010627:0.007544:0.008501:0.006368:0.005313:0.007439:0.006388:0.007439:0.009564:0.006368:0.010627:0.008501:0.009564:0.005313:0.006368:0.010627:0.009564:0.010627:0.010627:0.007544:0.005313
Deck deck =:@0.185529:0.828514:0.296103:0.828514:0.296103:0.815940:0.185529:0.815940:0.010052:0.010052:0.010052:0.010052:0.010060:0.010052:0.010033:0.010052:0.010052:0.010060:0.010052
new:@0.306164:0.828514:0.336321:0.828514:0.336321:0.815940:0.306164:0.815940:0.010052:0.010052:0.010052
Deck();:@0.346362:0.828514:0.416730:0.828514:0.416730:0.815940:0.346362:0.815940:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052
shuffleDeck(deck);:@0.185529:0.847119:0.366475:0.847119:0.366475:0.834545:0.185529:0.834545:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052:0.010052